const baseUrl="https://www.ord.io/content/",collectionUrl="collection.json",tempBaseUrl="https://raw.githubusercontent.com/devlz303/assets/master/",cardColors={white:{s:"eeeeee",g:"ffffff"},black:{s:"202020",g:"353535"},orange:{s:"f17b00",g:"ff9b19"},silver:{s:"888888",g:"eeeeee"},gold:{s:"ae9244",g:"efda78"},anthracite:{s:"ccc",g:"ccc"},purple:{s:"ccc",g:"ccc"}},css=".card,.s{font-weight:400}.title,.trait{text-align:center}.title,.type{text-transform:uppercase}.count,.type{letter-spacing:.02em}@font-face{font-family:Poppins;src:url('https://ordinals.com/content/a90c1c2ea06ae83c56e5c078b7c8855644e19d3f01d2a1f73d8c758b0c48f201i0') format('woff2');font-style:normal;font-weight:400}@font-face{font-family:Poppins;src:url('https://ordinals.com/content/4e139ae3b0376e42c364b901bd0f483d4d6ec2d5f7830a8d1e451a245583a43ei0') format('woff2');font-style:normal;font-weight:600}*{outline:0;box-sizing:border-box;user-select:none}body{background:#000;margin:0;padding:0;overflow:hidden;font-family:Poppins,Helvetica,sans-serif;font-size:16px;line-height:1.6em}#container{display:none;cursor:grab}#container.black{color:#ddd}#container:active{cursor:grabbing}.card{width:400px;height:600px;border-radius:20px;padding:20px;font-style:normal;background:0 0}.card.solid{background:#eee}.card.overlay{background:linear-gradient(90deg,rgba(255,255,255,0) 0,#fff 45%,#fff 55%,rgba(255,255,255,0) 100%)}.s{font-size:1em}.t{font-weight:600;font-size:1.6em}img{margin:20px 0;width:100%;height:auto}.footer{display:flex;flex-direction:row;position:absolute;width:calc(100% - 40px);bottom:20px}.right{flex:1}.title{font-size:1.4em;margin:0 0 20px}.grid{display:grid;grid-template-columns:180px 180px;grid-template-rows:80px 80px 80px 80px 80px 80px;column-gap:10px;row-gap:10px}.trait{border:1px solid #575050;border-radius:8px;align-items:center;padding:10px;font-size:.9em;line-height:1.4em}.value{font-weight:800}";let camera,scene,renderer,controls,styleRules,cardColor;async function init(){if("object"!=typeof THREE||"complete"!==document.readyState)return setTimeout(async()=>await init(),10);document.getElementsByTagName("style")[0].appendChild(document.createTextNode(".card,.s{font-weight:400}.title,.trait{text-align:center}.title,.type{text-transform:uppercase}.count,.type{letter-spacing:.02em}@font-face{font-family:Poppins;src:url('https://ordinals.com/content/a90c1c2ea06ae83c56e5c078b7c8855644e19d3f01d2a1f73d8c758b0c48f201i0') format('woff2');font-style:normal;font-weight:400}@font-face{font-family:Poppins;src:url('https://ordinals.com/content/4e139ae3b0376e42c364b901bd0f483d4d6ec2d5f7830a8d1e451a245583a43ei0') format('woff2');font-style:normal;font-weight:600}*{outline:0;box-sizing:border-box;user-select:none}body{background:#000;margin:0;padding:0;overflow:hidden;font-family:Poppins,Helvetica,sans-serif;font-size:16px;line-height:1.6em}#container{display:none;cursor:grab}#container.black{color:#ddd}#container:active{cursor:grabbing}.card{width:400px;height:600px;border-radius:20px;padding:20px;font-style:normal;background:0 0}.card.solid{background:#eee}.card.overlay{background:linear-gradient(90deg,rgba(255,255,255,0) 0,#fff 45%,#fff 55%,rgba(255,255,255,0) 100%)}.s{font-size:1em}.t{font-weight:600;font-size:1.6em}img{margin:20px 0;width:100%;height:auto}.footer{display:flex;flex-direction:row;position:absolute;width:calc(100% - 40px);bottom:20px}.right{flex:1}.title{font-size:1.4em;margin:0 0 20px}.grid{display:grid;grid-template-columns:180px 180px;grid-template-rows:80px 80px 80px 80px 80px 80px;column-gap:10px;row-gap:10px}.trait{border:1px solid #575050;border-radius:8px;align-items:center;padding:10px;font-size:.9em;line-height:1.4em}.value{font-weight:800}")),styleRules=getCssStyleRules([".card.overlay",".card.solid"]);let e=document.getElementById("container"),t=e.dataset.inscription,n=await getJson(collectionUrl),r=n.items.find(e=>e.inscription_id===t);cardColor="orange",(camera=new THREE.PerspectiveCamera(45,window.innerWidth/window.innerHeight,1,2e3)).position.z=1100,scene=new THREE.Scene,createCardLayer("front","",`<div class='t'>${r.name}</div><div class='s'>${r.rarity}</div><img src='https://www.ord.io/content/${t}' draggable='false' onload='(() => { document.getElementById("container").style.display = "block" })()'><div class='t'>#${r.number}</div><div class='s'>${getSubText(r.number)}</div><div class='footer'><div class='right'>${(r.content_length/1e3).toFixed(2)} KB</div><div>${n.collection.name}</div></div>`,2),createCardLayer("front","overlay","",1),createCardLayer("both","solid","",0),createCardLayer("back","overlay","",1),createCardLayer("back","",`<div class='title'>traits</div><div class='grid'>${r.attributes.map(e=>`<div class='trait'><div class='type'>${e.trait_type}</div><div class='value'>${e.value}</div><div class='count'>${e.count}</div></div>`).join("")}</div>`,2),(renderer=new CSS3DRenderer).setSize(window.innerWidth,window.innerHeight),e.className=cardColor,e.appendChild(renderer.domElement),(controls=new OrbitControls(camera,renderer.domElement)).enableZoom=!0,controls.minDistance=600,controls.maxDistance=2e3,controls.minPolarAngle=2*Math.PI/10,controls.maxPolarAngle=9*Math.PI/10,controls.mouseButtons={LEFT:THREE.MOUSE.ROTATE,MIDDLE:THREE.MOUSE.DOLLY,RIGHT:THREE.MOUSE.ROTATE},controls.touches={ONE:THREE.TOUCH.ROTATE,TWO:THREE.TOUCH.DOLLY_ROTATE},controls.addEventListener("change",render),controls.update(),window.addEventListener("resize",onWindowResize),render()}function onWindowResize(){camera.aspect=window.innerWidth/window.innerHeight,camera.updateProjectionMatrix(),renderer.setSize(window.innerWidth,window.innerHeight),render()}function render(){setStyleRules(camera),renderer.render(scene,camera)}async function getJson(e){return JSON.parse(await new THREE.FileLoader().loadAsync(`https://raw.githubusercontent.com/devlz303/assets/master/${collectionUrl}`))}function getSubText(e){return e>=1e6?"":`Sub${e<5e4?"50K":e<1e5?"100K":"1M"}`}function getQSValue(e,t){var n=qs.find(t=>0===t.indexOf(e+"="));return n?n.split("=")[1]:t}function getCssStyleRules(e){let t=document.styleSheets[0],n=t.cssRules||t.rules,r={};for(var a=0;a<n.length;a++){let o=n[a];-1!==e.indexOf(o.selectorText)&&(r[o.selectorText]=o)}return r}function setStyleRules(){let e=parseInt(THREE.MathUtils.radToDeg(camera.rotation.y)),t=Math.min(Math.max(45+parseInt(e/2),0),100);camera.position.z<0&&(t=100-t-10);let n=Math.min(Math.max(t+10,0),100),r=cardColors[cardColor],a=convertToRGB(r.g);styleRules[".card.solid"].style.background=`#${r.s}`,styleRules[".card.overlay"].style.background=`linear-gradient(90deg, rgba(${a.join(",")},0) 0%, rgba(${a.join(",")},1) ${t}%, rgba(${a.join(",")},1) ${n}%, rgba(${a.join(",")},0) 100%)`}function createCardLayer(e="both",t="",n="",r=0){let a=document.createElement("div");a.className=`card ${t}`,a.innerHTML=n;let o=new CSS3DObject(a);o.position.z=r,"back"===e&&(o.rotation.set(0,Math.PI,0),o.position.z=-r),scene.add(o)}function convertToRGB(e){var t=e.match(/.{1,2}/g);return[parseInt(t[0],16),parseInt(t[1],16),parseInt(t[2],16),]}(async()=>init())();